# 小部件：菜单

- 在窗口 ImGuiWindowFlags_MenuBar 上使用 BeginMenuBar() 以附加到其菜单栏。
- 使用 BeginMainMenuBar() 在屏幕顶部创建一个菜单栏并附加到它。
- 使用 BeginMenu() 创建菜单。您可以使用相同的标识符多次调用 BeginMenu() 以向其附加更多项目。
- MenuItem() 键盘快捷键是为了方便而显示的，ImGui 目前_未处理_。

### Remark

* Window > BeginMenuBar > BeginMenu > MenuItem
* BeginMainMenuBar是全局菜单栏

### MenuItem
* MenuItem是根节点，是有功能的
* 返回值用if跟OnClicked逻辑
* enable是指控件使能，enable=false时控件为灰色无法交互
* selected是控件状态，默认是没有的，可以和一个bool状态关联
  * ![Snipaste_2021-09-12_22-56-49](https://raw.githubusercontent.com/zolo-mario/image-host/main/20210704/Snipaste_2021-09-12_22-56-49.2eu8xnw99rr4.png)

### bool   BeginMenuBar ();     
附加到当前窗口的菜单栏（需要在父窗口上设置 ImGuiWindowFlags_MenuBar 标志）。

### void   EndMenuBar ();       
只有在 BeginMenuBar() 返回 true 时才调用 EndMenuBar()！

### bool   BeginMainMenuBar (); 
创建并附加到全屏菜单栏。

### void   EndMainMenuBar ();   
只有在 BeginMainMenuBar() 返回 true 时才调用 EndMainMenuBar()！

### bool   BeginMenu ( const  char * label, bool enabled = true );  
创建一个子菜单项。只有在返回 true 时才调用 EndMenu()！

### void   EndMenu ();  
只有在 BeginMenu() 返回 true 时才调用 EndMenu()！

### bool   MenuItem ( const  char * label, const  char *shortcut = NULL , bool selected = false , bool enabled = true );  
激活时返回真。

### bool   MenuItem ( const  char * label, const  char * shortcut, bool * p_selected, bool enabled = true );      
激活时返回 true + toggle (*p_selected) 如果 p_selected != NULL

## C API

```cpp    
// Widgets: Menus
// - Use BeginMenuBar() on a window ImGuiWindowFlags_MenuBar to append to its menu bar.
// - Use BeginMainMenuBar() to create a menu bar at the top of the screen and append to it.
// - Use BeginMenu() to create a menu. You can call BeginMenu() multiple time with the same identifier to append more items to it.
// - Not that MenuItem() keyboardshortcuts are displayed as a convenience but _not processed_ by Dear ImGui at the moment.
IMGUI_API boolBeginMenuBar();   // append to menu-bar of current window (requires ImGuiWindowFlags_MenuBar flag set on parent window).
IMGUI_API void EndMenuBar();     // only call EndMenuBar() if BeginMenuBar() returns true!
IMGUI_API bool BeginMainMenuBar();         // create and append to a full screen menu-bar.
IMGUI_API void EndMainMenuBar(); // only call EndMainMenuBar() if BeginMainMenuBar() returns true!
IMGUI_API bool BeginMenu(const char* label, bool enabled = true);        // create a sub-menu entry. only call EndMenu() if this returns true!
IMGUI_API void EndMenu();        // only call EndMenu() if BeginMenu() returns true!
IMGUI_API bool MenuItem(const char* label, const char* shortcut = NULL, bool selected = false, bool enabled = true);  // return true when activated.
IMGUI_API bool MenuItem(const char* label, const char* shortcut, bool* p_selected, bool enabled = true);    // return true when activated + toggle (*p_selected) if p_selected != NULL
```

## Lua API

```lua
-- ## Widgets: Menus

--- Returns: bool (shouldDraw)
--- shouldDraw = ImGui.BeginMenuBar()
---@return boolean @shouldDraw
function ImGui.BeginMenuBar() end

function ImGui.EndMenuBar() end

--- Returns: bool (shouldDraw)
--- shouldDraw = ImGui.BeginMainMenuBar()
---@return boolean @shouldDraw
function ImGui.BeginMainMenuBar() end

function ImGui.EndMainMenuBar() end

--- Parameters: text (label), bool (enabled) [O]
--- Returns: bool (shouldDraw)
--- Overloads
--- shouldDraw = ImGui.BeginMenu("Label")
--- shouldDraw = ImGui.BeginMenu("Label", true)
---@param label string
---@param enabled boolean
---@return boolean @shouldDraw
function ImGui.BeginMenu(label, enabled) end

function ImGui.EndMenu() end

--- Parameters A: text (label), text (shortcut) [0]
--- Parameters B: text (label), text (shortcut), bool (selected)
--- Parameters C: text (label), bool (selected)
--- Returns A: bool (activated)
--- returns B: bool (selected), bool (activated)
--- Overloads
--- activated = ImGui.MenuItem("Label")
--- activated = ImGui.MenuItem("Label", "ALT+F4")
--- selected, activated = ImGui.MenuItem("Label", selected)
--- selected, activated = ImGui.MenuItem("Label", "ALT+F4", selected)
--- selected, activated = ImGui.MenuItem("Label", "ALT+F4", selected, true)
--- ```
function ImGui.MenuItem(label, shortcut, selected) end
```

## Demo

```cpp
// Menu Bar
if (ImGui::BeginMenuBar())
{
    if (ImGui::BeginMenu("Menu"))
    {
        ShowExampleMenuFile();
        ImGui::EndMenu();
    }
    if (ImGui::BeginMenu("Examples"))
    {
        ImGui::MenuItem("Main menu bar", NULL, &show_app_main_menu_bar);
        ImGui::MenuItem("Console", NULL, &show_app_console);
        ImGui::MenuItem("Log", NULL, &show_app_log);
        ImGui::MenuItem("Simple layout", NULL, &show_app_layout);
        ImGui::MenuItem("Property editor", NULL, &show_app_property_editor);
        ImGui::MenuItem("Long text display", NULL, &show_app_long_text);
        ImGui::MenuItem("Auto-resizing window", NULL, &show_app_auto_resize);
        ImGui::MenuItem("Constrained-resizing window", NULL, &show_app_constrained_resize);
        ImGui::MenuItem("Simple overlay", NULL, &show_app_simple_overlay);
        ImGui::MenuItem("Fullscreen window", NULL, &show_app_fullscreen);
        ImGui::MenuItem("Manipulating window titles", NULL, &show_app_window_titles);
        ImGui::MenuItem("Custom rendering", NULL, &show_app_custom_rendering);
        ImGui::MenuItem("Dockspace", NULL, &show_app_dockspace);
        ImGui::MenuItem("Documents", NULL, &show_app_documents);
        ImGui::EndMenu();
    }
    if (ImGui::BeginMenu("Tools"))
    {
        ImGui::MenuItem("Metrics/Debugger", NULL, &show_app_metrics);
        ImGui::MenuItem("Style Editor", NULL, &show_app_style_editor);
        ImGui::MenuItem("About Dear ImGui", NULL, &show_app_about);
        ImGui::EndMenu();
    }
    ImGui::EndMenuBar();
}


// Note that shortcuts are currently provided for display only
// (future version will add explicit flags to BeginMenu() to request processing shortcuts)
static void ShowExampleMenuFile()
{
    ImGui::MenuItem("(demo menu)", NULL, false, false);
    if (ImGui::MenuItem("New")) {}
    if (ImGui::MenuItem("Open", "Ctrl+O")) {}
    if (ImGui::BeginMenu("Open Recent"))
    {
        ImGui::MenuItem("fish_hat.c");
        ImGui::MenuItem("fish_hat.inl");
        ImGui::MenuItem("fish_hat.h");
        if (ImGui::BeginMenu("More.."))
        {
  ImGui::MenuItem("Hello");
  ImGui::MenuItem("Sailor");
  if (ImGui::BeginMenu("Recurse.."))
  {
      ShowExampleMenuFile();
      ImGui::EndMenu();
  }
  ImGui::EndMenu();
        }
        ImGui::EndMenu();
    }
    if (ImGui::MenuItem("Save", "Ctrl+S")) {}
    if (ImGui::MenuItem("Save As..")) {}

    ImGui::Separator();
    if (ImGui::BeginMenu("Options"))
    {
        static bool enabled = true;
        ImGui::MenuItem("Enabled", "", &enabled);
        ImGui::BeginChild("child", ImVec2(0, 60), true);
        for (int i = 0; i < 10; i++)
  ImGui::Text("Scrolling Text %d", i);
        ImGui::EndChild();
        static float f = 0.5f;
        static int n = 0;
        ImGui::SliderFloat("Value", &f, 0.0f, 1.0f);
        ImGui::InputFloat("Input", &f, 0.1f);
        ImGui::Combo("Combo", &n, "Yes\0No\0Maybe\0\0");
        ImGui::EndMenu();
    }

    if (ImGui::BeginMenu("Colors"))
    {
        float sz = ImGui::GetTextLineHeight();
        for (int i = 0; i < ImGuiCol_COUNT; i++)
        {
  const char* name = ImGui::GetStyleColorName((ImGuiCol)i);
  ImVec2 p = ImGui::GetCursorScreenPos();
  ImGui::GetWindowDrawList()->AddRectFilled(p, ImVec2(p.x + sz, p.y + sz), ImGui::GetColorU32((ImGuiCol)i));
  ImGui::Dummy(ImVec2(sz, sz));
  ImGui::SameLine();
  ImGui::MenuItem(name);
        }
        ImGui::EndMenu();
    }

    // Here we demonstrate appending again to the "Options" menu (which we already created above)
    // Of course in this demo it is a little bit silly that this function calls BeginMenu("Options") twice.
    // In a real code-base using it would make senses to use this feature from very different code locations.
    if (ImGui::BeginMenu("Options")) // <-- Append!
    {
        static bool b = true;
        ImGui::Checkbox("SomeOption", &b);
        ImGui::EndMenu();
    }

    if (ImGui::BeginMenu("Disabled", false)) // Disabled
    {
        IM_ASSERT(0);
    }
    if (ImGui::MenuItem("Checked", NULL, true)) {}
    if (ImGui::MenuItem("Quit", "Alt+F4")) {}
}
```